import{Ra as x,Sa as a,l as E,za as $}from"./chunk-UC44CHGE.js";import{Ja as v,K as p,N as h,Na as C,S as d,Z as _,a as S,b as f,c as m,ea as g,ib as I,ja as b,o as i,y as n}from"./chunk-J75BIECF.js";var u=class r{http=d(E);errorText=d(x);toDto(s){let l=s,{id:e}=l,t=m(l,["id"]);return f(S({},t),{date:new Date(s.date).toISOString()})}getSessions$(){return this.http.get(a.sessionsUrl).pipe(n(s=>i(()=>new Error(this.errorText.get(s,"Session")))))}getSession$(s){return this.http.get(a.sessionsUrl+s).pipe(n(e=>i(()=>new Error(this.errorText.get(e,"Session")))))}createSession$(s,e){let t=this.toDto(e);return this.http.post(a.sessionsUrl+s,t).pipe(n(o=>i(()=>new Error(this.errorText.get(o,"Session")))))}updateSession$(s,e){let t=this.toDto(e);return this.http.put(a.sessionsUrl+s,t).pipe(n(o=>i(()=>new Error(this.errorText.get(o,"Session")))))}updateSessionGoal$(s,e){let t={goal:e};return this.http.patch(a.sessionsUrl+s+"/goal",t).pipe(n(o=>i(()=>new Error(this.errorText.get(o,"Session")))))}deleteSession$(s){return this.http.delete(a.sessionsUrl+s).pipe(n(e=>i(()=>new Error(this.errorText.get(e,"Session")))))}removeSession$(s){return this.http.patch(a.sessionsUrl+s+"/remove","").pipe(n(e=>i(()=>new Error(this.errorText.get(e,"Session")))))}restoreSession$(s){return this.http.patch(a.sessionsUrl+s+"/restore","").pipe(n(e=>i(()=>new Error(this.errorText.get(e,"Session")))))}static \u0275fac=function(e){return new(e||r)};static \u0275prov=h({token:r,factory:r.\u0275fac,providedIn:"root"})};var D=class r{api=d(u);_sessions=g([]);_session=g(void 0);sessions=this._sessions.asReadonly();session=this._session.asReadonly();_error=g(null);error=this._error.asReadonly();_loading=g(!1);loading=this._loading.asReadonly();getSessions(){this._loading.set(!0),this._error.set(null),this.api.getSessions$().subscribe({next:s=>{this._sessions.set(s),this._loading.set(!1)},error:s=>{console.log("Error getting sessions.",s),this._error.set(s.message),this._loading.set(!1)}})}getSession(s){if(this._session()?.id!==s){if(this._loading.set(!0),this._error.set(null),s.length==0){this._session.set(void 0);return}this.api.getSession$(s).subscribe({next:e=>{this._session.set(e),this._loading.set(!1)},error:e=>{console.log("Error getting session.",e),this._error.set(e.message),this._loading.set(!1)}})}}getSession$(s){return this.api.getSession$(s)}createSession(s,e){this._loading.set(!0),this._error.set(null),this.api.createSession$(s,e).pipe(p({next:t=>{let o=t;this._sessions.update(l=>[...l,o]),this._loading.set(!1)},error:t=>{console.error("Session creating error",t),this._error.set(t.message),this._loading.set(!1)}})).subscribe()}createSession$(s,e){return this.api.createSession$(s,e)}updateSession(s,e){this._loading.set(!0),this._error.set(null),this.api.updateSession$(s,e).pipe(p({next:t=>{let o=t;this._sessions.update(l=>l.map(c=>c.id===s?o:c)),this._loading.set(!1)},error:t=>{console.error("Session updating error",t),this._error.set(t.message),this._loading.set(!1)}})).subscribe()}updateSession$(s,e){return this.api.updateSession$(s,e)}updateSessionGoal$(s,e){return this.api.updateSessionGoal$(s,e)}deleteSession(s){this._loading.set(!0),this._error.set(null),this.api.deleteSession$(s).pipe(p({next:()=>{this._sessions.update(e=>e.filter(t=>t.id!==s)),this._loading.set(!1)},error:e=>{console.error("Session deleting error",e),this._error.set(e.message),this._loading.set(!1)}})).subscribe()}removeSession(s){this._loading.set(!0),this._error.set(null),this.api.removeSession$(s).pipe(p({next:()=>{this._sessions.update(e=>e.filter(t=>t.id!==s)),this._loading.set(!1)},error:e=>{console.error("Session removing error",e),this._error.set(e.message),this._loading.set(!1)}})).subscribe()}restoreSession(s){this._loading.set(!0),this._error.set(null),this.api.restoreSession$(s).pipe(p({next:e=>{console.log(e),this._loading.set(!1)},error:e=>{console.error("Session restoring error",e),this._error.set(e.message),this._loading.set(!1)}})).subscribe()}clearSession(){this._session.set(void 0)}static \u0275fac=function(e){return new(e||r)};static \u0275prov=h({token:r,factory:r.\u0275fac,providedIn:"root"})};var R=["data-p-icon","eye"],z=(()=>{class r extends ${static \u0275fac=(()=>{let e;return function(o){return(e||(e=b(r)))(o||r)}})();static \u0275cmp=v({type:r,selectors:[["","data-p-icon","eye"]],features:[C],attrs:R,decls:1,vars:0,consts:[["fill-rule","evenodd","clip-rule","evenodd","d","M0.0535499 7.25213C0.208567 7.59162 2.40413 12.4 7 12.4C11.5959 12.4 13.7914 7.59162 13.9465 7.25213C13.9487 7.2471 13.9506 7.24304 13.952 7.24001C13.9837 7.16396 14 7.08239 14 7.00001C14 6.91762 13.9837 6.83605 13.952 6.76001C13.9506 6.75697 13.9487 6.75292 13.9465 6.74788C13.7914 6.4084 11.5959 1.60001 7 1.60001C2.40413 1.60001 0.208567 6.40839 0.0535499 6.74788C0.0512519 6.75292 0.0494023 6.75697 0.048 6.76001C0.0163137 6.83605 0 6.91762 0 7.00001C0 7.08239 0.0163137 7.16396 0.048 7.24001C0.0494023 7.24304 0.0512519 7.2471 0.0535499 7.25213ZM7 11.2C3.664 11.2 1.736 7.92001 1.264 7.00001C1.736 6.08001 3.664 2.80001 7 2.80001C10.336 2.80001 12.264 6.08001 12.736 7.00001C12.264 7.92001 10.336 11.2 7 11.2ZM5.55551 9.16182C5.98308 9.44751 6.48576 9.6 7 9.6C7.68891 9.59789 8.349 9.32328 8.83614 8.83614C9.32328 8.349 9.59789 7.68891 9.59999 7C9.59999 6.48576 9.44751 5.98308 9.16182 5.55551C8.87612 5.12794 8.47006 4.7947 7.99497 4.59791C7.51988 4.40112 6.99711 4.34963 6.49276 4.44995C5.98841 4.55027 5.52513 4.7979 5.16152 5.16152C4.7979 5.52513 4.55027 5.98841 4.44995 6.49276C4.34963 6.99711 4.40112 7.51988 4.59791 7.99497C4.7947 8.47006 5.12794 8.87612 5.55551 9.16182ZM6.2222 5.83594C6.45243 5.6821 6.7231 5.6 7 5.6C7.37065 5.6021 7.72553 5.75027 7.98762 6.01237C8.24972 6.27446 8.39789 6.62934 8.4 7C8.4 7.27689 8.31789 7.54756 8.16405 7.77779C8.01022 8.00802 7.79157 8.18746 7.53575 8.29343C7.27994 8.39939 6.99844 8.42711 6.72687 8.37309C6.4553 8.31908 6.20584 8.18574 6.01005 7.98994C5.81425 7.79415 5.68091 7.54469 5.6269 7.27312C5.57288 7.00155 5.6006 6.72006 5.70656 6.46424C5.81253 6.20842 5.99197 5.98977 6.2222 5.83594Z","fill","currentColor"]],template:function(t,o){t&1&&(_(),I(0,"path",0))},encapsulation:2})}return r})();export{z as a,D as b};
