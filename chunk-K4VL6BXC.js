import{Ra as m,Sa as n,l as b}from"./chunk-ZOTFAVLD.js";import{K as p,N as g,S as l,a as _,b as P,c as f,ea as d,o,y as i}from"./chunk-J75BIECF.js";var h=class a{http=l(b);errorText=l(m);toDto(e){let c=e,{id:s}=c,r=f(c,["id"]);return P(_({},r),{start_date:e.start_date?new Date(e.start_date).toISOString():null,end_date:e.end_date?new Date(e.end_date).toISOString():null,is_grow:e.is_grow??!1,contract_signed:e.contract_signed??!1,lodp_signed:e.lodp_signed??!1,rgpd_signed:e.rgpd_signed??!1})}getProcesses$(){return this.http.get(n.processesUrl).pipe(i(e=>o(()=>new Error(this.errorText.get(e,"Process")))))}getProcess$(e){return this.http.get(n.processesUrl+e).pipe(i(s=>o(()=>new Error(this.errorText.get(s,"Process")))))}createProcess$(e,s){let r=this.toDto(s);return this.http.post(n.processesUrl+e,r).pipe(i(t=>o(()=>new Error(this.errorText.get(t,"Process")))))}updateProcess$(e,s){let r=this.toDto(s);return this.http.put(n.processesUrl+e,r).pipe(i(t=>o(()=>new Error(this.errorText.get(t,"Process")))))}deleteProcess$(e){return this.http.delete(n.processesUrl+e).pipe(i(s=>o(()=>new Error(this.errorText.get(s,"Process")))))}removeProcess$(e){return this.http.patch(n.processesUrl+e+"/remove","").pipe(i(s=>o(()=>new Error(this.errorText.get(s,"Process")))))}restoreProcess$(e){return this.http.patch(n.processesUrl+e+"/restore","").pipe(i(s=>o(()=>new Error(this.errorText.get(s,"Process")))))}static \u0275fac=function(s){return new(s||a)};static \u0275prov=g({token:a,factory:a.\u0275fac,providedIn:"root"})};var v=class a{api=l(h);_processes=d([]);_process=d(void 0);processes=this._processes.asReadonly();process=this._process.asReadonly();_error=d(null);error=this._error.asReadonly();_loading=d(!1);loading=this._loading.asReadonly();getProcesses(){this._loading.set(!0),this._error.set(null),this.api.getProcesses$().subscribe({next:e=>{this._processes.set(e),this._loading.set(!1)},error:e=>{this._error.set(e.message),this._loading.set(!1)}})}getProcess(e){if(this._loading.set(!0),this._error.set(null),e.length==0){this._process.set(void 0);return}this.api.getProcess$(e).subscribe({next:s=>{this._process.set(s),this._loading.set(!1)},error:s=>{this._error.set(s.message),this._loading.set(!1)}})}getProcess$(e){return this.api.getProcess$(e)}createProcess(e,s){this._loading.set(!0),this._error.set(null),this.api.createProcess$(e,s).pipe(p({next:r=>{let t=r;this._processes.update(c=>[...c,t]),this._loading.set(!1)},error:r=>{this._error.set(r.message),this._loading.set(!1)}})).subscribe()}createProcess$(e,s){return this.api.createProcess$(e,s)}updateProcess(e,s){this._loading.set(!0),this._error.set(null),this.api.updateProcess$(e,s).pipe(p({next:r=>{let t=r;this._processes.update(c=>c.map(u=>u.id===e?t:u)),this._loading.set(!1)},error:r=>{this._error.set(r.message),this._loading.set(!1)}})).subscribe()}updateProcess$(e,s){return this.api.updateProcess$(e,s)}deleteProcess(e){this._loading.set(!0),this._error.set(null),this.api.deleteProcess$(e).pipe(p({next:()=>{this._processes.update(s=>s.filter(r=>r.id!==e)),this._loading.set(!1)},error:s=>{this._error.set(s.message),this._loading.set(!1)}})).subscribe()}removeProcess(e){this._loading.set(!0),this._error.set(null),this.api.removeProcess$(e).pipe(p({next:()=>{this._processes.update(s=>s.filter(r=>r.id!==e)),this._loading.set(!1)},error:s=>{this._error.set(s.message),this._loading.set(!1)}})).subscribe()}restoreProcess(e){this._loading.set(!0),this._error.set(null),this.api.restoreProcess$(e).pipe(p({next:s=>{this._loading.set(!1)},error:s=>{this._error.set(s.message),this._loading.set(!1)}})).subscribe()}clearProcess(){this._process.set(void 0)}static \u0275fac=function(s){return new(s||a)};static \u0275prov=g({token:a,factory:a.\u0275fac,providedIn:"root"})};export{v as a};
